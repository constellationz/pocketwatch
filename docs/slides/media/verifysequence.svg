<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="557px" preserveAspectRatio="none" style="width:403px;height:557px;background:#FFFFFF;" version="1.1" viewBox="0 0 403 557" width="403px" zoomAndPan="magnify"><defs/><g><ellipse cx="176.1563" cy="16" fill="#222222" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#F1F1F1" height="34.1328" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="97.6563" y="67"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="137" x="107.6563" y="88.6016">User clicks 'verify email'</text><rect fill="#F1F1F1" height="34.1328" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="270" x="41.1563" y="142"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="250" x="51.1563" y="163.6016">Generate verification link with special token</text><rect fill="#F1F1F1" height="34.1328" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="189" x="81.6563" y="217"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="169" x="91.6563" y="238.6016">User clicks on verification link</text><rect fill="#F1F1F1" height="34.1328" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="171" x="90.6563" y="292"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="151" x="100.6563" y="313.6016">Send token back to server</text><g id="elem_#11"><polygon fill="#F1F1F1" points="176.1563,372,188.1563,384,176.1563,396,164.1563,384,176.1563,372" style="stroke:#181818;stroke-width:0.5;"/></g><rect fill="#F1F1F1" height="34.1328" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="228.6563" y="367"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="75" x="238.6563" y="388.6016">Don't update</text><g id="elem_#16"><polygon fill="#F1F1F1" points="176.1563,447,188.1563,459,176.1563,471,164.1563,459,176.1563,447" style="stroke:#181818;stroke-width:0.5;"/></g><rect fill="#F1F1F1" height="34.1328" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="173" x="224.6563" y="442"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="153" x="234.6563" y="463.6016">Email changed, do nothing</text><rect fill="#F1F1F1" height="34.1328" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="132.1563" y="517"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="68" x="142.1563" y="538.6016">Verify email</text><!--MD5=[0b6341454240e5f53c8efd9506c2830a]
link start to User clicks 'verify email'--><g id="link_start_User clicks 'verify email'"><path d="M176.1563,26.46 C176.1563,35.38 176.1563,49.1 176.1563,60.78 " fill="none" id="start-to-User clicks 'verify email'" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="176.1563,65.68,180.1563,56.68,176.1563,60.68,172.1563,56.68,176.1563,65.68" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[837b849658a396efc075f4ee63bcbc21]
link User clicks 'verify email' to Generate verification link with special token--><g id="link_User clicks 'verify email'_Generate verification link with special token"><path d="M176.1563,101.2 C176.1563,111.34 176.1563,124.54 176.1563,135.66 " fill="none" id="User clicks 'verify email'-to-Generate verification link with special token" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="176.1563,140.59,180.1563,131.59,176.1563,135.59,172.1563,131.59,176.1563,140.59" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[7174c2a39af334665951e3378bb0dbcb]
link Generate verification link with special token to User clicks on verification link--><g id="link_Generate verification link with special token_User clicks on verification link"><path d="M176.1563,176.2 C176.1563,186.34 176.1563,199.54 176.1563,210.66 " fill="none" id="Generate verification link with special token-to-User clicks on verification link" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="176.1563,215.59,180.1563,206.59,176.1563,210.59,172.1563,206.59,176.1563,215.59" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[6d20f8bf0d6b851e00196031c76f6b18]
link User clicks on verification link to Send token back to server--><g id="link_User clicks on verification link_Send token back to server"><path d="M176.1563,251.2 C176.1563,261.34 176.1563,274.54 176.1563,285.66 " fill="none" id="User clicks on verification link-to-Send token back to server" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="176.1563,290.59,180.1563,281.59,176.1563,285.59,172.1563,281.59,176.1563,290.59" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[dfc3f5c2bb3f54e944877fe8c305e08d]
link Send token back to server to #11--><g id="link_Send token back to server_#11"><path d="M176.1563,326.2 C176.1563,337.93 176.1563,353.77 176.1563,365.74 " fill="none" id="Send token back to server-to-#11" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="176.1563,370.6,180.1563,361.6,176.1563,365.6,172.1563,361.6,176.1563,370.6" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="77" x="80.3875" y="361.4976">Token expired</text></g><!--MD5=[4f5642fea2ddbfc8c737a3aba6f02652]
link #11 to Don't update--><g id="link_#11_Don't update"><path d="M188.8263,384 C197.5763,384 209.8663,384 222.4763,384 " fill="none" id="#11-to-Don't update" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="227.2763,384,218.2763,380,222.2763,384,218.2763,388,227.2763,384" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="19" x="198.9063" y="378.6348">Yes</text></g><!--MD5=[0658803fd9d6f63080f99f302814a1bc]
link #11 to #16--><g id="link_#11_#16"><path d="M176.1563,396.41 C176.1563,408.23 176.1563,426.86 176.1563,440.54 " fill="none" id="#11-to-#16" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="176.1563,445.43,180.1563,436.43,176.1563,440.43,172.1563,436.43,176.1563,445.43" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="150" x="6" y="440.2024">User's email is token's email</text></g><!--MD5=[1c13bf33f4e7733a941987e72727d1a3]
link #16 to Email changed, do nothing--><g id="link_#16_Email changed, do nothing"><path d="M188.6163,459 C196.2463,459 206.7763,459 218.4863,459 " fill="none" id="#16-to-Email changed, do nothing" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="223.3263,459,214.3263,455,218.3263,459,214.3263,463,223.3263,459" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="15" x="198.9063" y="453.6348">No</text></g><!--MD5=[ca1d59d5fffde69b5b9543113119d5aa]
link #16 to Verify email--><g id="link_#16_Verify email"><path d="M176.1563,471.41 C176.1563,481.91 176.1563,497.78 176.1563,510.78 " fill="none" id="#16-to-Verify email" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="176.1563,515.53,180.1563,506.53,176.1563,510.53,172.1563,506.53,176.1563,515.53" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[219a1f6e00f7186de5a06a6bd8392c2c]
@startuml
(*) - -> "User clicks 'verify email'"
- -> "Generate verification link with special token"
- -> "User clicks on verification link"
- -> "Send token back to server"
If "Token expired" then
    -right-> [Yes] "Don't update"
else
    If "User's email is token's email" then
        -right-> [No] "Email changed, do nothing"
    else
        - -> Verify email
    endif
endif
@enduml

PlantUML version 1.2022.7(Mon Aug 22 13:01:30 EDT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>